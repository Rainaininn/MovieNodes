(this.webpackJsonpMovieNodes=this.webpackJsonpMovieNodes||[]).push([[0],{31:function(e,t,a){e.exports=a(65)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(30),l=a.n(i),o=(a(36),a(5)),c=a(6),s=a(8),u=a(7),m=(a(37),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).addStyling=function(){return e.props.tab.id==e.props.activeTab?{backgroundColor:"transparent",fontWeight:"bolder"}:{backgroundColor:"transparent"}},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"tab",style:this.addStyling(),onClick:this.props.changeTab.bind(this,this.props.tab.id)},this.props.tab.title)}}]),a}(n.Component)),d=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.props.tabs.map((function(t){return r.a.createElement(m,{tab:t,activeTab:e.props.activeTab,changeTab:e.props.changeTab})}))}}]),a}(n.Component),v=a(4),f=a(18),b=(a(38),{apiKey:"AIzaSyDu3M9Sj5s85PTbszJyrvq1ODr6EWvQRLM",authDomain:"cs180personalweb.firebaseapp.com",databaseURL:"https://cs180personalweb.firebaseio.com"}),h=a(11),p=a(14),g=a(17),y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={newMovieID:null},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),p.apps.length||p.initializeApp(b),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;"newMovieID"===t&&this.setState({newMovieID:a})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t="https://www.omdbapi.com/?apikey=98ff92ae&i="+this.state.newMovieID;g.get(t).then((function(t){"False"===t.data.Response?(alert("Invalid movie ID, please try again."),e.preventDefault()):p.database().ref("data3").orderByChild("imdbID").equalTo(t.data.imdbID).limitToFirst(1).once("value",(function(a){null!==a.val()?(alert("This movie already exists."),e.preventDefault()):(p.database().ref("data3").push({imdbID:t.data.imdbID,Poster:t.data.Poster,Title:t.data.Title,Year:t.data.Year,Director:t.data.Director,imdbRating:t.data.imdbRating,Metascore:t.data.Metascore,Plot:t.data.Plot,Awards:t.data.Awards,Runtime:t.data.Runtime,Actors:t.data.Actors,List:""}),alert("The movie has been successfully added."))}))})).then((function(e){console.log(e)})),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("form",{className:"newMovieListForm",onSubmit:this.handleSubmit},r.a.createElement("label",null,"Movie ID: ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"newMovieID",value:this.state.newMovieID,style:{width:"250px",fontSize:"13pt"},onChange:this.handleChange}),"Please give the imdbID of the movie."),r.a.createElement("br",null),r.a.createElement("input",{className:"submitBtn",type:"submit",value:"Submit"}))}}]),a}(r.a.Component),E=a(14),j=(a(17),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={newMovieListName:null},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),E.apps.length||E.initializeApp(b),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;"newMovieListName"===t&&this.setState({newMovieListName:a})}},{key:"handleSubmit",value:function(e){var t=this;E.database().ref("data4").orderByChild("Name").equalTo(this.state.newMovieListName).once("value",(function(a){null!==a.val()?(alert("This movie list name already exists."),e.preventDefault()):(E.database().ref("data4").push({Name:t.state.newMovieListName}),alert("The movie list has been successfully created."))})),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("form",{className:"newMovieListForm",onSubmit:this.handleSubmit},r.a.createElement("label",null,"List title : ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"newMovieListName",value:this.state.newMovieListName,style:{width:"250px",fontSize:"13pt"},onChange:this.handleChange}),"Please enter a title for the new list."),r.a.createElement("br",null),r.a.createElement("input",{className:"submitBtn",type:"submit",value:"Submit"}))}}]),a}(r.a.Component));a(14);var O=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),i=(a[0],a[1],Object(n.useState)(!0)),l=Object(v.a)(i,2);return l[0],l[1],r.a.createElement("div",null,r.a.createElement("div",{className:"big-words"},"Add a new movie",r.a.createElement("br",null),r.a.createElement(y,null)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"big-words"},"Create a new movie list",r.a.createElement("br",null),r.a.createElement(j,null)))},w=a(14);a(17);var N=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),i=a[0],l=a[1],o=Object(n.useState)([]),c=Object(v.a)(o,2),s=c[0],u=c[1],m=Object(n.useState)([]),d=Object(v.a)(m,2),b=d[0],h=d[1],p=Object(n.useState)("All"),g=Object(v.a)(p,2),y=g[0],E=g[1],j=Object(n.useState)(""),N=Object(v.a)(j,2),S=N[0],k=N[1],C=Object(n.useState)(0),D=Object(v.a)(C,2),M=(D[0],D[1]),T=Object(n.useState)([]),x=Object(v.a)(T,2),A=x[0],I=x[1],L=Object(n.useState)(!0),P=Object(v.a)(L,2),z=P[0],B=(P[1],Object(n.useState)(!1)),R=Object(v.a)(B,2),Y=R[0],q=R[1],F=Object(n.useState)(0),G=Object(v.a)(F,2),W=G[0],J=G[1],U=Object(n.useState)(!1),V=Object(v.a)(U,2);function X(e){q((function(e){return!0})),J((function(t){return e})),function(){var e=window.scrollX,t=window.scrollY;window.onscroll=function(){window.scrollTo(e,t)}}(),console.log("open ? ",Y),console.log("Clicked on this movie: ",i[e])}function _(){var e=i[W];if(!0===Y)return r.a.createElement(f.a,{open:Y,closeOnDocumentClick:!0,onClose:function(){return H()},contentStyle:{width:"500px"},overlayStyle:{background:"rgba(0,0,0,0.1)"}},r.a.createElement("div",{className:"movieDetails"},r.a.createElement("button",{className:"close1",onClick:function(){return H()}},"\xd7"),r.a.createElement("div",{className:"moviePoster"},r.a.createElement("img",{src:e.Poster,height:"330px"})),r.a.createElement("div",{className:"movieDes"},r.a.createElement("div",{className:"movieTitle"},e.Title),r.a.createElement("div",{className:"movieYear"},e.Year),r.a.createElement("div",{className:"movieDirect"},"Directed by ",e.Director),r.a.createElement("div",{className:"movieScore"},r.a.createElement("div",{className:"imdbScore"},"IMDB Score: ",e.imdbRating),r.a.createElement("div",{className:"metaScore"},"Meta Score: ",e.Metascore)),r.a.createElement("div",{className:"moviePlot"},e.Plot),r.a.createElement("div",{className:"movieAwards"},e.Awards),r.a.createElement("div",{className:"movieMin"},e.Runtime),r.a.createElement("div",{className:"movieScore"},r.a.createElement("div",{className:"updateListIn"},r.a.createElement("label",null,"Put in list:",r.a.createElement("select",{value:e.List,onChange:function(t){H(),function(e,t){w.database().ref("data3").orderByChild("imdbID").equalTo(t.imdbID).once("value").then((function(t){t.forEach((function(t){t.ref.update({List:e})}))})).then((function(){if(console.log("Moved!"),"All"!=y){var e=i,a=e.indexOf(t);-1!==a&&(e.splice(a,1),l(e))}}))}(t.target.value,e)},style:{fontSize:"13pt"}},s.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("div",{className:"deleteMovie",onClick:function(){H(),alert("You do not have access to delete a movie.")}},"Delete")))))}function H(){q((function(e){return!1})),window.onscroll=function(){},console.log("Done close modal")}return V[0],V[1],Object(n.useEffect)((function(){console.log("Calling UseEffect Again!!"),w.database().ref("data3").on("value",(function(e){var t=e.val(),a=[],n=0;for(var r in t)a.push(t[r]),n+=1;if(M(n),I(a),"All"===y&&""===S)l(a);else{for(var i in a)a[i].List===y&&1}})),w.database().ref("data4").on("value",(function(e){var t=e.val(),a=[""],n=["All"];for(var r in t)a.push(t[r].Name),n.push(t[r].Name);u(a),h(n)}))}),[z,Y]),r.a.createElement("div",{className:"background1"},r.a.createElement("div",{className:"whitespace"}),r.a.createElement("div",{className:"movies-main"},r.a.createElement("div",{className:"movies-right"},r.a.createElement("br",null),r.a.createElement("div",{className:"big-words"},"Search a movie"),r.a.createElement("form",{className:"movieScore"},r.a.createElement("label",null,r.a.createElement("input",{type:"text",name:"searchMovie",value:S,style:{width:"200px",fontSize:"13pt"},onChange:function(e){return function(e){k(e)}(e.target.value)}})),r.a.createElement("button",{className:"searchBtn",onClick:function(e){return function(e){e.preventDefault(),console.log("Searching this movie: ",S);var t=[];for(var a in A)A[a].Title===S&&t.push(A[a]);l(t),""===S&&l(A)}(e)}},"Search")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(O,null)),r.a.createElement("div",{className:"movies-left"},r.a.createElement("div",null,function(){var e=i.map((function(e,t){var a=e;return r.a.createElement("div",{key:a.imdbID},r.a.createElement("img",{src:a.Poster,className:"grid-part-portrait",onClick:function(){return X(t)}}),_())}));return r.a.createElement("div",{className:"movieGrid"},r.a.createElement("div",{className:"header1"},r.a.createElement("label",null,r.a.createElement("select",{value:y,onChange:function(e){!function(e){E(e);var t=[];if(w.database().ref("data3").on("value",(function(e){var a=e.val();for(var n in a)t.push(a[n]),1})),"All"===e)console.log("Choose All!!"),l(t);else{var a=[];for(var n in t)t[n].List===e&&a.push(t[n]);l(a)}}(e.target.value)},style:{fontSize:"13pt"}},b.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("div",{className:"image-grid1"},e))}()))))},S=(a(29),a(14)),k=a(29),C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).drag=function(e){return k.drag().on("start",(function(t){k.event.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y})).on("drag",(function(e){e.fx=k.event.x,e.fy=k.event.y})).on("end",(function(t){k.event.active||e.alphaTarget(0),t.fx=null,t.fy=null}))},e.state={nodes:[],links:[],movies:[]},e}return Object(c.a)(a,[{key:"chart",value:function(e,t){var a=t.map((function(e){return Object.create(e)})),n=e.map((function(e){return Object.create(e)})),r=k.create("svg").attr("viewBox",[0,0,1920,1080]),i=r.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(a).join("line").attr("stroke-width",(function(e){return Math.sqrt(e.value)})),l=r.append("defs"),o=k.forceSimulation(n).force("link",k.forceLink().links(t).id((function(e){return e.index})).distance(250)).force("charge",k.forceManyBody()).force("center",k.forceCenter(960,540)),c=k.select("body").append("div").attr("class","tooltip").style("opacity",0),s=r.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(n).join("circle").attr("r",(function(e){return 1==e.group?90:20})).attr("fill",(function(e){return 1==e.group?(l.append("pattern").attr("id","img_"+e.index).attr("width",1).attr("height",1).append("image").attr("xlink:href",e.poster).attr("width",270).attr("height",270).attr("x",-45).attr("y",-20),console.log("Hey: ",e,"\n",l),"url(#img_"+e.index+")"):k.color("cornflowerblue")})).on("mouseover",(function(e){c.transition().duration(200).style("opacity",.9),c.html(e.name).style("left",k.event.pageX+"px").style("top",k.event.pageY-28+"px")})).on("mouseout",(function(e){c.transition().duration(500).style("opacity",0)})).call(this.drag(o));return o.on("tick",(function(){i.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),s.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y}))})),r.node()}},{key:"componentDidMount",value:function(){var e=this;console.log("Component did mount !"),S.apps.length||S.initializeApp(b),S.database().ref("data3").on("value",(function(t){var a=t.val(),n=[],r=[],i=[],l=function(e){"GraphViz"===a[e].List&&function(){n.push(a[e]),r.push({name:a[e].Title,poster:a[e].Poster,group:1});var t=a[e].Actors.split(", ");console.log("Actors: ",t);var l=function(n){var l=!1;for(var o in r)t[n]==r[o].name&&(l=!0);!1===l&&r.push({name:t[n],group:2}),c=r.findIndex((function(t){return t.name==a[e].Title})),s=r.findIndex((function(e){return e.name==t[n]})),i.push({source:c,target:s})};for(var o in t)l(o)}()};for(var o in a){var c,s;l(o)}e.setState({movies:n}),e.setState({nodes:r}),e.setState({links:i})}))}},{key:"componentDidUpdate",value:function(){0!==Object.keys(this.state.nodes).length&&0!==Object.keys(this.state.links).length&&document.getElementById("mysvg").appendChild(this.chart(this.state.nodes,this.state.links));console.log("New nodes :",this.state.nodes),console.log("New links :",this.state.links)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"mysvg"}),r.a.createElement("div",{className:"descrip-graph"},"You can edit this graph by arranging the GraphViz list in Movies tab."))}}]),a}(n.Component),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).displayContent=function(){return 1==e.props.activeTab?r.a.createElement(N,null):r.a.createElement(C,null)},e}return Object(c.a)(a,[{key:"render",value:function(){return this.displayContent()}}]),a}(n.Component),M=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={activeTab:1},e.changeTab=function(t){3!=t&&e.setState({activeTab:t})},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"nav-bar"},r.a.createElement(d,{tabs:[{id:1,title:"Movies"},{id:2,title:"Graph"}],activeTab:this.state.activeTab,changeTab:this.changeTab})),r.a.createElement("div",{className:"main-body"},r.a.createElement(D,{activeTab:this.state.activeTab})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.4e0fddc3.chunk.js.map